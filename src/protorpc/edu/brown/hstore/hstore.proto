import "ca/evanjones/protorpc/Protocol.proto";

package edu.brown.hstore;

// -----------------------------------
// MESSAGES
// -----------------------------------

message FragmentDependency {
	required int32 dependency_id = 1;
    required bytes data = 2;
}

message FragmentTransfer {
    required int32 sender_partition_id = 1;
    required int64 txn_id = 2;
    repeated FragmentDependency dependencies = 3;
}

message FragmentAcknowledgement {
    required int32 sender_partition_id = 1;
    required int64 txn_id = 2;
}

// -----------------------------------
// SERVICE
// -----------------------------------

service HStoreService {
   rpc SendFragment (FragmentTransfer) returns (FragmentAcknowledgement);
}